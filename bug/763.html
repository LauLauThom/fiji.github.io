<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 763 &ndash; Updater problem</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=763&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=763">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=763">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=763">



    
    <link href="../css/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1492730519" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1492730519" rel="stylesheet"
        type="text/css" ><link href="../css/global.css" rel="stylesheet"
        type="text/css" ><link href="../css/bug.css" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1492730519" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="../css/dusk.css" rel="stylesheet"
        type="text/css" title="Dusk">

    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1492730519"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1492730519"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1492730519"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1492730519"></script><script type="text/javascript" src="js/yui/json/json-min.js?1492730519"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1492730519"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1492730519"></script><script type="text/javascript" src="js/global.js?1492730519"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 763 – Updater problem",  
                             "show_bug.cgi?id=763" );
        document.title = "Bug 763 – Updater problem";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 763 – Updater problem", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1492730519"></script><script type="text/javascript" src="js/field.js?1492730519"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class=" bz_bug bz_status_RESOLVED bz_product_Fiji bz_component_Plugins bz_bug_763 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;763</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Updater problem</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2014-06-12 11:09:34 CDT</p>
    </td>
</tr>
</table>


</div> 

<div id="bugzilla-body">


<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-06-12 11:09:34">
  <input type="hidden" name="longdesclength" value="20">
  <input type="hidden" name="id" value="763">
  <input type="hidden" name="token" value="1492731780-iv8Kw1qCjwmACIHz1RdiDVjW9m5oXDUqXR6jFiULIJ0">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=763"><b>Bug&nbsp;763</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Updater problem</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>Updater problem
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('Updater problem', '');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Fiji</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Fiji"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Plugins</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       Windows
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P4
       normal
      </td>
    </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">ImageJ Bugs Mailing List</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'imagej-bugs\x40imagej.net',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=763&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=763">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2014-06-09 08:27 CDT by <span class="vcard">claudio.collinet
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-06-12 11:09 CDT 
      (<a href="show_activity.cgi?id=763">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>3 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="claudio.collinet">claudio.collinet</option>
                <option value="hinerm">hinerm</option>
                <option value="johannes.schindelin">johannes.schindelin</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>


  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1492730519" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-09 08:27:48 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Since this morning I'm having problems with the fiji updater. It first started and repeated the same download operation over and over again and once I stopped it I cannot update anymore. I get message in an updater window that says &quot;there was a problem checking whether everything is up-to-date. Start the updater?&quot; If I do it, I get a bootstrap.js window. I follow the instructions (i.e. run the command Evaluate Javascript) and the following log 

Error: La fonction importPackage doit être appelée avec un package et non avec &quot;[JavaClass ij]&quot; (&lt;Unknown source&gt;#1) in &lt;Unknown source&gt; at line number 1 

It's in french but it says that the function importPackage needs to be called with a package and not with JavaClass. 

What happened? How can I give you more details if you need them? 
Thanks 
Claudio 
P.S. I'm running imageJ 2.0.0-rc-2; Java 1.6.0_24[64-bit] on Win7

Information about your version of Java:

  os.arch =&gt; amd64
  os.name =&gt; Windows 7
  os.version =&gt; 6.1
  java.version =&gt; 1.6.0_24
  java.vendor =&gt; Sun Microsystems Inc.
  java.runtime.name =&gt; Java(TM) SE Runtime Environment
  java.runtime.version =&gt; 1.6.0_24-b07
  java.vm.name =&gt; Java HotSpot(TM) 64-Bit Server VM
  java.vm.version =&gt; 19.1-b02
  java.vm.vendor =&gt; Sun Microsystems Inc.
  java.vm.info =&gt; mixed mode
  java.awt.graphicsenv =&gt; sun.awt.Win32GraphicsEnvironment
  java.specification.name =&gt; Java Platform API Specification
  java.specification.version =&gt; 1.6
  sun.cpu.endian =&gt; little
  sun.desktop =&gt; windows
  file.separator =&gt; \

The up-to-date check says: imagej.updater.core.UpToDate

Information relevant to JAVA_HOME related problems:

  JAVA_HOME is set to: C:\Fiji.app/java/win64/jdk1.6.0_24//jre
  imagej.dir =&gt; C:\Fiji.app

Information about the version of each plugin:

imagej.updater.core.FilesCollection</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-09 14:28:39 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Typically, the problem just goes away if you cancel the update (there is a cancel button in the progress window), quit Fiji and restart it.

That is just a work-around, of course, while I am busy trying to fix things.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-09 14:54:39 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Found the problem, hold on while I clean up the code to fix it properly.</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-09 16:41:38 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Unfortunately, the problem is more dramatic than I initially thought. So I fixed it, but of course the fix is only in the *new* version!

That means that you will have to cancel the infinite updating loop, restart Fiji, and update again. That should repair your updater.

Very sorry for the breakage!</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 03:40:28 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Johannes and all the others,
unfortunately the solution you propose doesn't work for me. Since the first time I canceled the loop I can't launch the updater anymore.. As I wrote in my first post (see below) when I restart FIJI or if run the command 'Update FIJI' from the Help menu I get the bootstrap.js macro but this is the end won't work (see below).

from first post [...] &quot;I get message in an updater window that says &quot;there was a problem checking whether everything is up-to-date. Start the updater?&quot; If I do it, I get a bootstrap.js window. I follow the instructions (i.e. run the command Evaluate Javascript) and the following log 

Error: La fonction importPackage doit être appelée avec un package et non avec &quot;[JavaClass ij]&quot; (&lt;Unknown source&gt;#1) in &lt;Unknown source&gt; at line number 1 

It's in french but it says that the function importPackage needs to be called with a package and not with JavaClass.&quot; [...]

What should I do to repair the updater? I wouldn't like to have to re-install everything.
Thanks a lot for your help!
Claudio</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 07:44:07 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Claudio,

 Sorry I misunderstood your original message.. I thought that Fiji was asking if you wanted to update and that's what was causing bootstrap.js to pop up. I didn't realize it also pops up when you run Help &gt; Update Fiji manually.

 Could you try updating from the command line? The wiki page (fiji.sc/Update_Fiji) explains how to do so.. basically you just want to run &quot;imagej-winXX.exe --update update&quot; and it should run the updater.

 If that doesn't work, the update site is hosted on the Fiji wiki itself (<a href="http://fiji.sc/update/">http://fiji.sc/update/</a>). You should be able to manually download the updated .jars... but Johannes needs to chime in here, as I'm not sure which dependencies you need to update.

 Also, Johannes, I got the infinite updater bug this morning again.. :( maybe because I was downloading the fix? It worked for me to cancel and restart Fiji.</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 11:25:06 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
I tried to run the updater from the command prompt as you suggested but nothing happens.. Since I hav never used FIJI through the command line I may have done something wrong. Here is what I did exactly:
- in the command prompt I navigate into the folder where I have executable fiji or imagej-win64 files
- then I run the &quot;imagej-win64.exe --update update&quot; command as you suggested, but nothing happens.
How should I proceed? What can I do to repair the problem?

Thanks a lot!
Claudio</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 12:07:35 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Claudio,

 What you did sounds exactly right.. as far as I can tell, no message means everything is up to date. It will only update things that would have been marked for update in the updater though...

 Johannes - which are the relevant jars that need to be updated?</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 12:11:34 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
as a matter of fact when I restart FIJI I get exactly the same problem as before trying the update from the command line. It looks as there was nothing to update and nothing has been updated...
Claudio</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark Hiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 14:45:57 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Claudio,

 It looks like there are some bugs with the ImageJ launcher on Windows. So try running:

&quot;imagej-win64.exe --debug --update update&quot;

instead. There were some recent changes to logging and it looks like they broke things on Windows at least, so behavior of the updater actually changes when --debug is specified.

This should tell you which jars need to be updated, but unfortunately I wasn't able to get them to actually update due to a problem harvesting command-line input. We'll get that fixed, but in the mean time you should be able to run this and least report back which jars it said needed output.

Let me know how that goes!

P.S. the new launcher tickets are:
<a href="https://github.com/imagej/imagej-launcher/issues/9">https://github.com/imagej/imagej-launcher/issues/9</a>
<a href="https://github.com/imagej/imagej-launcher/issues/10">https://github.com/imagej/imagej-launcher/issues/10</a>
<a href="https://github.com/imagej/imagej-launcher/issues/11">https://github.com/imagej/imagej-launcher/issues/11</a></pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-10 17:55:19 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hmm. This is really strange, in particular the error:

<span class="quote">&gt; Error: La fonction importPackage doit être appelée avec un package et non avec &quot;[JavaClass ij]&quot; (&lt;Unknown source&gt;#1) in &lt;Unknown source&gt; at line number 1 </span >

We never call importPackage at all, only importClass. In fact, I would never call importPackage anyway because those wildcard imports cause way more trouble than the people who like them so much would like to admit.

Claudio, to get you back to a working state, I would like to suggest the following: import the bootstrap.js yourself by calling File&gt;Import&gt;URL... and typing <a href="http://update.imagej.net/bootstrap.js">http://update.imagej.net/bootstrap.js</a> as URL. This should open the macro editor with the script that you should be able to call with Ctrl+J. If you still experience the problem with &quot;importPackage&quot;, may I ask you to use the Fiji Package Maker via Plugins&gt;Utilities&gt;Make Fiji Package to make a .zip and upload it via Help&gt;Upload Sample Image? I will try to fix this as soon as possible!</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 04:20:16 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Johannes,
firstly let me say thank you for spending so much of your time trying to fix this problem. Secondly, I tried to import the bootstrap.js by calling File&gt;Import&gt;URL... but I get the same problem as before. Finally, I tryied to use the Fiji Package Maker via Plugins&gt;Utilities&gt;Make Fiji Package to make a .zip but this also didn't want to work.. I get the following message appearing:

(Fiji Is Just) ImageJ 2.0.0-rc-2; Java 1.6.0_24 [64-bit]; Windows 7 6.1; 32MB of 20000MB (&lt;1%)
 
java.lang.NoClassDefFoundError: Could not initialize class fiji.packaging.ZipPackager
	at fiji.packaging.Package_Maker.run(Package_Maker.java:18)
	at ij.IJ.runUserPlugIn(IJ.java:201)
	at ij.IJ.runPlugIn(IJ.java:165)
	at ij.Executer.runCommand(Executer.java:131)
	at ij.Executer.run(Executer.java:64)
	at java.lang.Thread.run(Thread.java:662)

I hope this helps to find the problem. It looks like everything we try gives no results...
Best
Claudio</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 04:26:27 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Mark,
as yuo suggested I tried to launch the updated from the command line using the debug version. Here is the message I get in the command line I hope it helps to find out what the problem is.

Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\collinet&gt;cd/d c:\fiji.app

c:\Fiji.app&gt;imagej-win64.exe --debug --update update

c:\Fiji.app&gt;JRE not found in 'c:\Fiji.app/jre'
JAVA_HOME contains a JRE: 'c:\Fiji.app/java/win64/jdk1.6.0_24//jre'
javaw -Xmx20000m -Dpatch.ij1=false -Dpython.cachedir.skip=true -Dplugins.dir=c:\
\Fiji.app -Xincgc -XX:PermSize=128m -Djava.class.path=c:\\Fiji.app/jars/imagej-l
auncher-3.1.0.jar -Dimagej.dir=c:\\Fiji.app -Dij.dir=c:\\Fiji.app -Dfiji.dir=c:\
\Fiji.app -Dfiji.defaultLibPath=bin/server/jvm.dll -Dfiji.executable=c:\\Fiji.ap
p\\ImageJ-win64.exe -Dij.executable=c:\\Fiji.app\\ImageJ-win64.exe -Djava.librar
y.path=c:\\Fiji.app/lib/win64;c:\\Fiji.app/mm/win64 -Dsun.java2d.noddraw=true -D
ij.debug=true -Dscijava.log.level=debug net.imagej.launcher.ClassLauncher -class
path . -ijjarpath jars -ijjarpath plugins net.imagej.updater.CommandLine update
Using JAVA_HOME c:\Fiji.app/java/win64/jdk1.6.0_24//jre
Opening Java library c:\Fiji.app/java/win64/jdk1.6.0_24//jre/bin/server/jvm.dll
Adding option: -Djava.home=c:\Fiji.app/java/win64/jdk1.6.0_24/
ij1.plugin.dirs: null
$HOME/.plugins: C:\Users\collinet\.plugins does not exist
Launching main class net.imagej.updater.CommandLine with parameters [update]
Class loader = sun.misc.Launcher$AppClassLoader&#64;3326b249
java.lang.ClassNotFoundException: net.imagej.updater.CommandLine
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at net.imagej.launcher.ClassLauncher.launch(ClassLauncher.java:231)
        at net.imagej.launcher.ClassLauncher.run(ClassLauncher.java:184)
        at net.imagej.launcher.ClassLauncher.main(ClassLauncher.java:76)
java.lang.ClassNotFoundException: imagej.updater.CommandLine
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at net.imagej.launcher.ClassLauncher.launch(ClassLauncher.java:237)
        at net.imagej.launcher.ClassLauncher.run(ClassLauncher.java:184)
        at net.imagej.launcher.ClassLauncher.main(ClassLauncher.java:76)
Class 'net.imagej.updater.CommandLine' was not found</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 08:46:19 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Oh wow.

Last resort: can you just zip up your Fiji.app with any archiver you have handy (I usually recommend 7-Zip) and upload it with Help&gt;Upload Sample File or share it in any other convenient way? I really would like to have a look at the current situation...</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 09:08:58 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Johannes,
I uploaded my fiji.app as .rar just now. Let me know if you received it.
Claudio</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 11:19:22 CDT
        </span>
      </div>



<pre class="bz_comment_text" >I got the .rar, and with that Fiji I can reproduce both problems!

Will keep you posted.</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 14:02:58 CDT
        </span>
      </div>



<pre class="bz_comment_text" >The 'importPackage' problem you reported is caused by ImageJ 1.x prefixing Javascript scripts with a line that actually fails.

So I put in a couple more levels of fallbacks into the fallback Javascript, and with the Fiji.app you gave me, I can get it into a working shape again: it opens the Javascript and Ctrl+J lets it run the remote updater correctly.

Could you please verify that my fix works on your side of the Atlantic, too?

Thank you very much.</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-11 14:10:21 CDT
        </span>
      </div>



<pre class="bz_comment_text" >For Curtis: the diff is here: <a href="https://github.com/fiji/fiji/commit/bc7da8b6ea70bf6840be0c0d1fa7bdfcbf7c2203">https://github.com/fiji/fiji/commit/bc7da8b6ea70bf6840be0c0d1fa7bdfcbf7c2203</a></pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">claudio.collinet
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 11:02:56 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Hi Johannes,
it works also on the other side of the Atlantic! And now I can also read the very useful welcome message.
Thank you so much for your efforts!
All the best
Claudio</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=763#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Schindelin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-06-12 11:09:34 CDT
        </span>
      </div>



<pre class="bz_comment_text" >Great! I'll close this bug, then. Thank you for your patience with me, I think in the end Fiji became much more robust as a consequence!</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>


</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_bottom">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=763&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  
  <form action="show_bug.cgi?id=763" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_bottom"
        onsubmit="return check_mini_login_fields( '_bottom' );"
  >
    <input id="Bugzilla_login_bottom" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_bottom" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_bottom" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_bottom');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_bottom');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
<li id="forgot_container_bottom">
  <span class="separator">| </span>
  <a id="forgot_link_bottom" href="show_bug.cgi?id=763&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('_bottom')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form_bottom"
        class="mini_forgot bz_default_hidden">
    <label for="login_bottom">Login:</label>
    <input type="text" name="loginname" size="20" id="login_bottom">
    <input id="forgot_button_bottom" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_bottom" name="token" value="1492731780-aztk2QZ6Dw66B0MdwY56JVGkAITTLifYYms70GURXmE">
    <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
  </form>
</li>
</ul>
  </li>

  
    


  
</ul>

  <div class="outro"></div>
</div>


</body>
</html>
